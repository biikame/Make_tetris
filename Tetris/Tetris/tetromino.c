/**********
* Include *
**********/
#include "pch.h"
#include "tetromino.h"

/**********************
* Function definition *
**********************/
TETROMINO *Tetromino_create(void){
	TETROMINO initialize = {
		{
			{//z
				0,0,0,0,0,//□ □ □ □ □
				0,0,0,0,0,//□ □ □ □ □
				0,1,2,1,1,//□ ■ ■ ■ ■
				0,0,0,0,0,//□ □ □ □ □
				0,0,0,0,0,//□ □ □ □ □

				0,0,0,0,0,//□ □ □ □ □
				0,0,1,0,0,//□ □ ■ □ □
				0,0,2,0,0,//□ □ ■ □ □
				0,0,1,0,0,//□ □ ■ □ □
				0,0,1,0,0,//□ □ ■ □ □

				0,0,0,0,0,//□ □ □ □ □
				0,0,0,0,0,//□ □ □ □ □
				1,1,2,1,0,//□ ■ ■ ■ ■
				0,0,0,0,0,//□ □ □ □ □
				0,0,0,0,0,//□ □ □ □ □

				0,0,0,0,0,//□ □ □ □ □
				0,0,1,0,0,//□ □ ■ □ □
				0,0,2,0,0,//□ □ ■ □ □
				0,0,1,0,0,//□ □ ■ □ □
				0,0,1,0,0,//□ □ ■ □ □
			},
			{
				0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,1,2,1,0,//□ ■ ■ ■ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
          
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,1,2,0,0,//□ ■ ■ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
          
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,0,0,//□ □ ■ □ □
                0,1,1,1,0,//□ ■ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
          
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
			},
			{
				0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,1,2,0,0,//□ ■ ■ □ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
          
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,1,0,//□ □ □ ■ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,1,2,0,0,//□ ■ ■ □ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,1,0,//□ □ □ ■ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
			},
			{
				0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,1,1,0,0,//□ ■ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,0,0,//□ ■ □ □ □
                0,0,2,1,0,//□ ■ ■ □ □
                0,0,0,1,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,1,1,0,0,//□ ■ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,0,1,0,//□ □ □ ■ □
                0,0,0,0,0,//□ □ □ □ □
			},
			{
				0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,1,2,1,0,//□ ■ ■ ■ □
                0,0,0,1,0,//□ □ □ ■ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,2,0,0,//□ □ ■ □ □
                0,1,1,0,0,//□ ■ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
         
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,1,0,0,0,//□ ■ □ □ □
                0,1,1,1,0,//□ ■ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
          
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,2,0,0,//□ □ ■ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
			},
			{
				0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,1,2,1,0,//□ ■ ■ ■ □
                0,1,0,0,0,//□ ■ □ □ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,1,1,0,0,//□ ■ ■ □ □
                0,0,2,0,0,//□ □ ■ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,0,0,0,//□ □ □ □ □
            
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,1,0,//□ □ □ ■ □
                0,1,2,1,0,//□ ■ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,1,0,0,//□ □ ■ □ □
                0,0,2,0,0,//□ □ ■ □ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
			},
			{
				0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
           
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
          
                0,0,0,0,0,//□ □ □ □ □
                0,0,0,0,0,//□ □ □ □ □
                0,0,2,1,0,//□ □ ■ ■ □
                0,0,1,1,0,//□ □ ■ ■ □
                0,0,0,0,0,//□ □ □ □ □
			},
		},
	};
	TETROMINO *tetromino;
	tetromino = (TETROMINO *)(malloc(sizeof(*tetromino)));
	*tetromino =initialize;
	return tetromino;
}
void Tetromino_destroy(TETROMINO *tetromino){
	free(tetromino);
}
void Tetromino_getRandamTetris(TETROMINO *tetromino){
	int i,j,k;
	int randData[enumhTETORIMINO_NUM+1];
	i=0,j=0,k=0;

	if(tetromino->randTetris[0][i] == 0 && tetromino->randTetris[1][i] != 0){
		for(i=0;i<enumhTETORIMINO_NUM;i++){
			tetromino->randTetris[k][i] = randData[i+1];		
		}
		tetromino->randTetris[k][0]=0;
	}
	while(k<2){

		if(tetromino->randTetris[k][0] == 0){

			while(j<enumhTETORIMINO_NUM+1){

				randData[j] = 1 + (int)(0 + rand() * ( (enumhTETORIMINO_NUM-1) - 0 + 1.0) / (1.0 + RAND_MAX) );

				for(i=1;i<j;i++){
					if(randData[i] == randData[j]){
						j--;
						break;
					}
				}
				j++;
			
			}
			for(i=0;i<enumhTETORIMINO_NUM;i++){
				tetromino->randTetris[k][i] = randData[i+1];		
			}
		}
		k++;
	}
	
}
void Tetromino_resetRandamTetris(TETROMINO *tetromino){
	int i;
	for(i=1;i<enumhTETORIMINO_NUM;i++){
		tetromino->randTetris[0][i-1] = tetromino->randTetris[0][i];
		tetromino->randTetris[0][i]	= 0;
		
	}
}
void Tetromino_setgetRandamTetris(TETROMINO *tetromino){
	int i;
	if(tetromino->randTetris[0][1] == 0){
		for(i=0;i<enumhTETORIMINO_NUM;i++){
			tetromino->randTetris[0][i+1] = tetromino->randTetris[1][i];
		}
	}
}
